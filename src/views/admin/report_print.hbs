<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Official Report - {{user.name}} | StudentPartner Academy</title>
    <style>
        /* OFFICIAL ACADEMIC REPORT - Government Transcript Style */
        @page { size:A4; margin:2cm; }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { 
            font-family:Times, 'Times New Roman', serif; font-size:11pt; line-height:1.3; color:#000; 
            width:210mm; max-width:210mm; margin:0 auto; padding:15mm; background:#fff;
        }
        @media print { body{padding:0;} .no-print{display:none;} }
        
        /* Strict Page Border */
        .page-frame { border:2pt solid #000; padding:15mm; position:relative; min-height:247mm; }
        .content { position:relative; z-index:2; }
        
        /* Header - Institutional Block */
        .header-block { 
            border-bottom:3pt solid #000; padding-bottom:12pt; margin-bottom:24pt; text-align:center;
            letter-spacing:1pt;
        }
        .logo-placeholder { 
            height:45pt; width:120pt; border:1pt solid #000; margin:0 auto 12pt; display:flex; align-items:center; 
            justify-content:center; font-weight:bold; font-size:14pt; background:#f9f9f9; position:relative;
            overflow:hidden; border-radius:4pt;
        }
        .logo-placeholder img { 
            width:100%; height:100%; object-fit:contain; display:block; 
        }
        .institution-name { font-size:16pt; font-weight:bold; margin-bottom:3pt; }
        .report-type { font-size:12pt; font-weight:normal; margin-bottom:6pt; }
        .doc-meta { font-size:10pt; display:flex; justify-content:space-between; margin-top:12pt; }
        
        /* Sections - Strict Divided */
        .section { margin-bottom:24pt; page-break-inside:avoid; }
        .section-header { 
            font-size:13pt; font-weight:bold; text-transform:uppercase; letter-spacing:0.5pt;
            border-bottom:2pt solid #000; padding-bottom:6pt; margin-bottom:18pt;
        }
        
        /* Info Tables - Official Format */
        .info-table { 
            width:100%; border-collapse:collapse; border-left:2pt solid #000; border-right:2pt solid #000; 
            margin-bottom:12pt;
        }
        .info-table th { 
            background:#f5f5f5; border-bottom:1pt solid #000; border-top:1pt solid #000; padding:8pt 12pt; 
            text-align:left; font-weight:normal; font-size:11pt; width:35%;
        }
        .info-table td { padding:8pt 12pt; border-bottom:1pt solid #000; border-top:1pt solid #000; font-size:12pt; }
        .info-table tr:last-child th, .info-table tr:last-child td { border-bottom:2pt solid #000; }
        
        /* Data Tables */
        .data-table { 
            width:100%; border-collapse:collapse; border:1pt solid #000; margin-top:12pt;
        }
        .data-table th { 
            background:#e6e6e6; border:1pt solid #000; padding:10pt 12pt; text-align:center; 
            font-weight:bold; font-size:11pt; text-transform:uppercase; letter-spacing:0.5pt;
        }
        .data-table td { padding:8pt 12pt; border:1pt solid #000; text-align:center; }
        .data-table tr:nth-child(even) td { background:#f9f9f9; }
        
        /* Role Badge */
        .role-tag { 
            display:inline-block; padding:4pt 8pt; border:1pt solid #000; background:#fff; 
            font-size:10pt; font-weight:bold; text-transform:uppercase; letter-spacing:0.5pt;
        }
        
        /* Footer - Official Notice */
        .footer { 
            margin-top:36pt; padding-top:18pt; border-top:2pt solid #000; text-align:center; 
            font-size:9pt; color:#333;
        }
        .authenticity { 
            font-weight:bold; margin-bottom:6pt; text-transform:uppercase; letter-spacing:1pt;
        }
        .confidential { font-style:italic; margin-top:12pt; }
        
        .print-btn { 
            position:fixed; top:15pt; right:15pt; background:#000; color:#fff; border:none; 
            padding:6pt 12pt; font-family:inherit; font-weight:bold; cursor:pointer; z-index:100;
        }
    </style>
</head>
<body>
    <div class="page-frame">
        <button class="print-btn no-print" onclick="window.print()">PRINT PDF</button>
        
        <div class="content">
            <!-- OFFICIAL HEADER WITH LOGO -->
            <div class="header-block">
                <div class="logo-placeholder">
                    <img src="/images/logo.png" alt="StudentPartner Academy Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div style="display:none; align-items:center; justify-content:center; width:100%; height:100%;">
                        STUDENTPARTNER<br><span style="font-size:12pt;">ACADEMY</span>
                    </div>
                </div>
                <div class="institution-name">STUDENTPARTNER ACADEMY</div>
                <div class="report-type">OFFICIAL ACADEMIC & PROFESSIONAL REPORT</div>
                <div class="doc-meta">
                    <span>Report No: {{reportId}}</span>
                    <span>Date: {{date}}</span>
                </div>
            </div>

            <!-- PERSONAL DETAILS -->
            <section class="section">
                <h2 class="section-header">1. Personal Particulars</h2>
                <table class="info-table">
                    <tr>
                        <th>Name in Full</th>
                        <td>{{user.name}}</td>
                    </tr>
                    <tr>
                        <th>Reg. No.</th>
                        <td>{{user.registration_id}}</td>
                    </tr>
                    <tr>
                        <th>Email ID</th>
                        <td>{{user.email}}</td>
                    </tr>
                    <tr>
                        <th>Designation</th>
                        <td><span class="role-tag">{{user.role}}</span></td>
                    </tr>
                    {{#if user.phone}}
                    <tr>
                        <th>Contact No.</th>
                        <td>{{user.phone}}</td>
                    </tr>
                    {{/if}}
                </table>
            </section>

            {{#if (eq user.role 'student')}}
            {{#if parent}}
            <section class="section">
                <h2 class="section-header">2. Guardian Details</h2>
                <table class="info-table">
                    <tr><th>Guardian Name</th><td>{{parent.name}}</td></tr>
                    <tr><th>Email</th><td>{{parent.email}}</td></tr>
                    <tr><th>Phone</th><td>{{#if parent.phone}}{{parent.phone}}{{else}}-{{/if}}</td></tr>
                </table>
            </section>
            {{/if}}

            <section class="section">
                <h2 class="section-header">3. Enrollment Details</h2>
                <table class="info-table">
                    <tr><th>Class/Grade</th><td>{{#if enrollment.class_name}}{{enrollment.class_name}}{{else}}-{{/if}}</td></tr>
                    <tr><th>Section</th><td>{{#if enrollment.section_name}}{{enrollment.section_name}}{{else}}-{{/if}}</td></tr>
                    <tr><th>Roll No.</th><td>{{#if enrollment.roll_number}}{{enrollment.roll_number}}{{else}}-{{/if}}</td></tr>
                </table>
            </section>

            <section class="section">
                <h2 class="section-header">4. Performance Summary</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Particulars</th>
                            <th>Current Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Attendance {{currentMonth}}</td>
                            <td>{{attendance_percentage}}%</td>
                        </tr>
                        <tr>
                            <td>Pending Leaves</td>
                            <td>{{pending_leaves}}</td>
                        </tr>
                    </tbody>
                </table>
            </section>
            {{/if}}

            {{#if (eq user.role 'teacher')}}
            <section class="section">
                <h2 class="section-header">3. Professional Summary</h2>
                <table class="info-table">
                    <tr><th>Total Classes</th><td>{{allocations.length}}</td></tr>
                    <tr><th>Total Students</th><td>{{totalStudents}}</td></tr>
                </table>
            </section>
            <section class="section">
                <h2 class="section-header">4. Teaching Assignments</h2>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Class</th>
                            <th>Section</th>
                            <th>Subject</th>
                            <th>Students</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each allocations}}
                        <tr>
                            <td>{{this.class_name}}</td>
                            <td>{{this.section_name}}</td>
                            <td>{{this.subject_name}}</td>
                            <td>{{this.student_count}}</td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </section>
            {{/if}}

            <!-- OFFICIAL FOOTER -->
            <footer class="footer">
                <div class="authenticity">Computer Generated - No Signature Required</div>
                <div>Verify at: studentpartner.in/verify/{{reportId}}</div>
                <div class="confidential">Strictly Confidential - For Official Use Only</div>
                <div style="margin-top:12pt; font-size:8pt;">Â© StudentPartner Academy 2026</div>
            </footer>
        </div>
    </div>
</body>
</html>
    