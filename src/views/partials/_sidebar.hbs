<aside class="sidebar">
    <div class="sidebar-header">
        <div class="logo">
            <i class="fa-solid fa-graduation-cap"></i>
            <span>StudentPartner</span>
        </div>
    </div>

    <div class="profile-section">
        <div class="avatar">
            <img src="{{#if user.profile_image}}{{user.profile_image}}{{else}}https://ui-avatars.com/api/?name={{user.name}}&background=random{{/if}}"
                alt="Profile">
        </div>
        <div class="user-info">
            <h3>{{user.name}}</h3>
            <p>{{user.email}}</p>
            <p style="font-size: 0.7em; opacity: 0.7; margin-top: 2px; letter-spacing: 0.5px;">{{user.registration_id}}
            </p>
        </div>
    </div>

    <nav class="sidebar-menu">
        <a href="/dashboard" class="menu-item {{#if (eq active 'overview')}}active{{/if}}">
            <i class="fa-solid fa-house"></i>
            <span>Overview</span>
        </a>

        {{#if (eq user.role 'student')}}
        <a href="/academic/timetable" class="menu-item {{#if (eq active 'schedule')}}active{{/if}}">
            <i class="fa-regular fa-calendar"></i>
            <span>Timetable</span>
        </a>
        <a href="/academic/materials" class="menu-item {{#if (eq active 'courses')}}active{{/if}}">
            <i class="fa-solid fa-book-open"></i>
            <span>Materials</span>
        </a>
        <a href="/academic/results" class="menu-item {{#if (eq active 'analytics')}}active{{/if}}">
            <i class="fa-solid fa-chart-pie"></i>
            <span>Results</span>
        </a>
        <a href="/dashboard/academic-command" class="menu-item {{#if (eq active 'academic-command')}}active{{/if}}">
            <i class="fa-solid fa-scale-balanced"></i>
            <span>Academic Issues</span>
        </a>
        {{/if}}

        {{#if (eq user.role 'teacher')}}
        <a href="/teacher/attendance" class="menu-item {{#if (eq active 'attendance')}}active{{/if}}">
            <i class="fa-solid fa-user-check"></i>
            <span>Attendance</span>
        </a>
        <a href="/teacher/materials" class="menu-item {{#if (eq active 'materials')}}active{{/if}}">
            <i class="fa-solid fa-upload"></i>
            <span>Uploads</span>
        </a>
        <a href="/teacher/marks" class="menu-item {{#if (eq active 'marks')}}active{{/if}}">
            <i class="fa-solid fa-pen-nib"></i>
            <span>Marks</span>
        </a>
        <a href="/dashboard/academic-command" class="menu-item {{#if (eq active 'academic-command')}}active{{/if}}">
            <i class="fa-solid fa-scale-balanced"></i>
            <span>Academic Issues</span>
        </a>
        {{/if}}

        {{#if (eq user.role 'admin')}}
        <a href="/admin/students" class="menu-item {{#if (eq active 'students')}}active{{/if}}">
            <i class="fa-solid fa-user-graduate"></i>
            <span>Student Details</span>
        </a>
        <a href="/admin/teachers" class="menu-item {{#if (eq active 'teachers')}}active{{/if}}">
            <i class="fa-solid fa-chalkboard-user"></i>
            <span>Teacher Details</span>
        </a>
        <a href="/admin/academic" class="menu-item {{#if (eq active 'academic')}}active{{/if}}">
            <i class="fa-solid fa-sitemap"></i>
            <span>Academic Command</span>
        </a>
        <a href="/dashboard/academic-command" class="menu-item {{#if (eq active 'academic-command')}}active{{/if}}">
            <i class="fa-solid fa-scale-balanced"></i>
            <span>Academic Issues</span>
        </a>
        <a href="/admin/leaves" class="menu-item {{#if (eq active 'leaves')}}active{{/if}}">
            <i class="fa-solid fa-envelope-open-text"></i>
            <span>Leave Oversight</span>
        </a>
        <a href="/admin/announcements" class="menu-item {{#if (eq active 'announcements')}}active{{/if}}">
            <i class="fa-solid fa-bullhorn"></i>
            <span>Broadcast Center</span>
        </a>
        <div class="menu-divider"></div>
        <a href="/admin/security" class="menu-item {{#if (eq active 'security')}}active{{/if}}">
            <i class="fa-solid fa-shield-halved"></i>
            <span>Security & Audit</span>
        </a>
        <a href="/admin/health" class="menu-item {{#if (eq active 'health')}}active{{/if}}">
            <i class="fa-solid fa-heart-pulse"></i>
            <span>System Health</span>
        </a>
        <a href="/admin/complaints" class="menu-item {{#if (eq active 'complaints')}}active{{/if}}">
            <i class="fa-solid fa-circle-exclamation"></i>
            <span>Issues & Complaints</span>
        </a>
        {{/if}}

        {{#if (eq user.role 'parent')}}
        <a href="/dashboard/academic-command" class="menu-item {{#if (eq active 'academic-command')}}active{{/if}}">
            <i class="fa-solid fa-scale-balanced"></i>
            <span>Academic Issues</span>
        </a>
        {{/if}}

        <a href="/dashboard/settings" class="menu-item {{#if (eq active 'settings')}}active{{/if}}">
            <i class="fa-solid fa-gear"></i>
            <span>Settings</span>
        </a>
    </nav>

    <div class="sidebar-actions">
        <button class="action-btn" onclick="toggleTaskModal()">
            <i class="fa-solid fa-plus-circle"></i>
            <span>Add Task</span>
        </button>
        {{#if (eq user.role 'admin')}}
        <button class="action-btn" onclick="location.href='/admin/announcements'">
            <i class="fa-solid fa-bullhorn"></i>
            <span>New Broadcast</span>
        </button>
        {{/if}}
    </div>

    <div class="sidebar-footer">
        <a href="/auth/logout" class="menu-item logout">
            <i class="fa-solid fa-arrow-right-from-bracket"></i>
            <span>Logout</span>
        </a>
    </div>
</aside>